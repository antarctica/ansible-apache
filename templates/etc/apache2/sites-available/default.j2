# {{ ansible_managed }}

ServerTokens ProductOnly

<VirtualHost *:80>
    ServerName {{ apache_default_var_www_server_name }}
    ServerAdmin {{ apache_default_var_www_server_admin }}
    DocumentRoot {{ apache_default_var_www_document_root }}
{% if apache_default_var_www_document_root_alias !=  '' %}
    Alias /{{ apache_default_var_www_document_root_alias }} "{{ apache_default_var_www_document_root }}"
{% endif %}

    # Possible values include: debug, info, notice, warn, error, crit, alert, emerg.
    LogLevel warn

    ErrorLog ${APACHE_LOG_DIR}/error.log
    CustomLog ${APACHE_LOG_DIR}/access.log combined

    <Directory />
        Options +FollowSymLinks
        AllowOverride All
    </Directory>
    
{% if apache_default_var_www_document_root ==  '/var/www/' %}
        <Directory /var/www/>
{% for option in apache_default_var_www_options %}
        Options {{ option }}
{% endfor %}
        AllowOverride {{ apache_default_var_www_allowoverride }}
        Order allow,deny
        # Allow access to web content
        allow from all
        Require all granted
    </Directory>
{% else %}
    <Directory {{ apache_default_var_www_document_root }}>
{% for option in apache_default_var_www_options %}
        Options {{ option }}
{% endfor %}
        AllowOverride {{ apache_default_var_www_allowoverride }}
        Order allow,deny
        # Allow access to web content
        allow from all
        Require all granted
    </Directory>
{% endif %}

    # Apache defaults
    Alias /doc/ "/usr/share/doc/"
    <Directory "/usr/share/doc/">
        Options Indexes MultiViews FollowSymLinks
        AllowOverride None
        Order deny,allow
        Deny from all
        Allow from 127.0.0.0/255.0.0.0 ::1/128
    </Directory>

    ScriptAlias /cgi-bin/ /usr/lib/cgi-bin/
    <Directory "/usr/lib/cgi-bin">
        AllowOverride None
        Options +ExecCGI -MultiViews +SymLinksIfOwnerMatch
        Order allow,deny
        Allow from all
    </Directory>
</VirtualHost>
